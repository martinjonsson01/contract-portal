@using Domain.Contracts
@inject HttpClient _http

<div id="@Contract.Name" class="list-group-item d-flex justify-content-between" style="max-width: 50%">
     @Contract.Name

     <button type="button" class="btn btn-danger" @onclick="RemoveContract">
         Ta bort
     </button>
</div>


@code {
    /// <summary>
    /// Called when a contract has been removed successfully.
    /// </summary>
    [Parameter]
    public EventCallback<Contract> OnContractRemoved { get; set; } = EventCallback<Contract>.Empty;


    /// <summary>
    /// The contract.
    /// </summary>
    [Parameter, EditorRequired,]
    public Contract Contract { get; set; } = new();

    private async Task RemoveContract()
    {
        HttpResponseMessage response = await _http.DeleteAsync($"api/v1/Contracts/{Contract.Id}");
        if (response.IsSuccessStatusCode)
        {
            await OnContractRemoved.InvokeAsync(Contract);
        }
    }
}
