@page "/admin"
@using Domain.Contracts
@using Domain.Users

<h2>Adminsida</h2>

<Tabs SelectedTab="@_selectedTab"
      SelectedTabChanged="@OnSelectedTabChanged"
      Justified="true"
      Pills="true">
    <Items>
        <Tab Name="contracts">Hantera kontrakt</Tab>
        <Tab Name="users">Hantera anv√§ndare</Tab>
    </Items>
    <Content>
        <TabPanel Name="contracts">
            <ContractForm OnContractUploaded="AddContractToTable"/>
            <ContractTable @ref="@_contractTable"/>
        </TabPanel>
        <TabPanel Name="users">
            <UserForm OnUserAdded="AddUserToTable"/>
            <UserTable @ref="@_userTable"/>
        </TabPanel>
    </Content>
</Tabs>

@code {

    private string _selectedTab = "contracts";

    private ContractTable _contractTable = null!;
    private UserTable _userTable = null!;

    private void AddContractToTable(Contract contract)
    {
        _contractTable.Add(contract);
    }

    private void AddUserToTable(User user)
    {
        _userTable.Add(user);
    }

    private Task OnSelectedTabChanged(string tabName)
    {
        _selectedTab = tabName;
        return Task.CompletedTask;
    }
}
