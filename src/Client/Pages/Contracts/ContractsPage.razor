@page "/contracts"
@using Domain.Contracts
@inject HttpClient _http

<RecentlyViewed @ref="_recentlyViewed"/>

<FetchData TData="Contract[]"
           Url="/api/v1/contracts/all"
           Context="contracts">

    @foreach (Contract contract in contracts)
    {
        <ContractCard Contract=@contract OnViewed="OnRecentContractAdded"/>
    }

</FetchData>

@code {
    private RecentlyViewed _recentlyViewed = null!;

    private void OnRecentContractAdded(Contract viewedContract)
    {
        _recentlyViewed.AddViewedContract(viewedContract);
    }
}
